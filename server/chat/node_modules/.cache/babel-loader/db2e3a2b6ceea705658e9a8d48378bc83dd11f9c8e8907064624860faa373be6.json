{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _createForOfIteratorHelper from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from\"react\";import Contact from\"./Contact.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ContactsBar(_ref){var user=_ref.user,onChatSelect=_ref.onChatSelect,onAddChat=_ref.onAddChat,fetchedChats=_ref.fetchedChats,setFetchedChats=_ref.setFetchedChats,getMessages=_ref.getMessages;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPopupVisible=_useState2[0],setPopupVisible=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newContactName=_useState4[0],setNewContactName=_useState4[1];var overlayRef=useRef(null);var socket=useRef(null);var addChatTriggered=useRef(false);useEffect(function(){socket.current=new WebSocket(\"ws://localhost:5000\");socket.current.addEventListener(\"open\",function(){console.log(\"WebSocket connection established\");});socket.current.addEventListener(\"message\",function(event){var data=JSON.parse(event.data);var chat=data.data.chat;if(data.event===\"chatAdded\"&&!addChatTriggered.current&&chat.users.find(function(u){return u.username===user.username;})){var existingChat=fetchedChats.find(function(c){return c.id===chat.id;});if(existingChat){return;}var otherUser=chat.users.find(function(u){return u.username!==user.username;});var newChat={id:chat.id,user:{username:otherUser.username,displayName:otherUser.displayName,profilePic:otherUser.profilePic},lastMessage:null};setFetchedChats(function(prevChats){return[].concat(_toConsumableArray(prevChats),[newChat]);});onAddChat(newChat);}else if(data.event===\"chatModified\"||data.event===\"chatRemoved\"){getChats();}});return function(){socket.current.close();};},[]);useEffect(function(){getChats();},[]);function getLastMessage(_x){return _getLastMessage.apply(this,arguments);}function _getLastMessage(){_getLastMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(chat){var messages;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getMessages(chat);case 2:messages=_context.sent;if(!(messages&&messages.length>0)){_context.next=6;break;}messages.sort(function(a,b){return b.id-a.id;});return _context.abrupt(\"return\",messages[0]);case 6:return _context.abrupt(\"return\",null);case 7:case\"end\":return _context.stop();}},_callee);}));return _getLastMessage.apply(this,arguments);}function handleAddChat(){return _handleAddChat.apply(this,arguments);}function _handleAddChat(){_handleAddChat=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var contact,res,errorMessage,data,lastMessage,newChat;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:addChatTriggered.current=true;contact={username:newContactName};_context2.next=4;return fetch('http://localhost:5000/api/Chats',{method:'post',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)},'body':JSON.stringify(contact)});case 4:res=_context2.sent;if(!(res.status!=200)){_context2.next=12;break;}_context2.next=8;return res.text();case 8:errorMessage=_context2.sent;alert(res.status+\" \"+res.statusText+\"\\n\"+errorMessage);_context2.next=22;break;case 12:_context2.next=14;return res.json();case 14:data=_context2.sent;_context2.next=17;return getLastMessage(data);case 17:lastMessage=_context2.sent;newChat={id:data.id,user:{\"username\":data.user.username,\"displayName\":data.user.displayName,\"profilePic\":data.user.profilePic},lastMessage:lastMessage};setPopupVisible(false);setFetchedChats(function(prevChats){return[].concat(_toConsumableArray(prevChats),[newChat]);});onAddChat(newChat);case 22:;addChatTriggered.current=false;case 24:case\"end\":return _context2.stop();}},_callee2);}));return _handleAddChat.apply(this,arguments);}function handleChatClick(_x2){return _handleChatClick.apply(this,arguments);}function _handleChatClick(){_handleChatClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(clickedChat){var id,res,errorMessage,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:id=clickedChat.id;_context3.next=3;return fetch(\"http://localhost:5000/api/Chats/\".concat(id),{method:'get',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});case 3:res=_context3.sent;if(!(res.status!=200)){_context3.next=11;break;}_context3.next=7;return res.text();case 7:errorMessage=_context3.sent;alert(res.status+\" \"+res.statusText+\"\\n\"+errorMessage);_context3.next=15;break;case 11:_context3.next=13;return res.json();case 13:data=_context3.sent;onChatSelect(data);case 15:case\"end\":return _context3.stop();}},_callee3);}));return _handleChatClick.apply(this,arguments);}var handlePopupToggle=function handlePopupToggle(){setPopupVisible(!isPopupVisible);};var handleOverlayClick=function handleOverlayClick(){if(isPopupVisible){return;}};useEffect(function(){if(isPopupVisible){overlayRef.current.addEventListener(\"click\",handleOverlayClick);}return function(){if(overlayRef.current){overlayRef.current.removeEventListener(\"click\",handleOverlayClick);}};},[isPopupVisible]);function getChats(){return _getChats.apply(this,arguments);}function _getChats(){_getChats=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var res,errorMessage,data,updatedChats,_iterator,_step,chat,lastMessage,updatedChat;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch('http://localhost:5000/api/Chats',{method:'get',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});case 3:res=_context4.sent;if(!(res.status!=200)){_context4.next=11;break;}_context4.next=7;return res.text();case 7:errorMessage=_context4.sent;alert(res.status+\" \"+res.statusText+\"\\n\"+errorMessage);_context4.next=19;break;case 11:_context4.next=13;return res.json();case 13:data=_context4.sent;updatedChats=[];_iterator=_createForOfIteratorHelper(data);try{for(_iterator.s();!(_step=_iterator.n()).done;){chat=_step.value;lastMessage=chat.lastMessage;updatedChat=_objectSpread(_objectSpread({},chat),{},{lastMessage:lastMessage});updatedChats.push(updatedChat);}}catch(err){_iterator.e(err);}finally{_iterator.f();}setFetchedChats(updatedChats);return _context4.abrupt(\"return\",data);case 19:_context4.next=24;break;case 21:_context4.prev=21;_context4.t0=_context4[\"catch\"](0);console.error('Error:',_context4.t0);case 24:case\"end\":return _context4.stop();}},_callee4,null,[[0,21]]);}));return _getChats.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"chats_bar\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"chat_bar_line1\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"chats_title\",children:\"Contacts\"}),/*#__PURE__*/_jsx(\"span\",{id:\"more_icon\",onClick:handlePopupToggle,children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"chats\",children:[fetchedChats&&fetchedChats.map(function(chat){return/*#__PURE__*/_jsx(Contact,{chat:chat,onClick:function onClick(){return handleChatClick(chat);}},chat.id);}),isPopupVisible&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",ref:overlayRef}),/*#__PURE__*/_jsx(\"div\",{id:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"popup_content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Add a new contact\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newContactName,onChange:function onChange(e){return setNewContactName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{id:\"cancel_button\",onClick:function onClick(){return setPopupVisible(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{id:\"add_button\",onClick:handleAddChat,children:\"Add\"})]})})]})]})]});}export default ContactsBar;","map":{"version":3,"names":["React","useState","useRef","useEffect","Contact","jsx","_jsx","jsxs","_jsxs","ContactsBar","_ref","user","onChatSelect","onAddChat","fetchedChats","setFetchedChats","getMessages","_useState","_useState2","_slicedToArray","isPopupVisible","setPopupVisible","_useState3","_useState4","newContactName","setNewContactName","overlayRef","socket","addChatTriggered","current","WebSocket","addEventListener","console","log","event","data","JSON","parse","chat","users","find","u","username","existingChat","c","id","otherUser","newChat","displayName","profilePic","lastMessage","prevChats","concat","_toConsumableArray","getChats","close","getLastMessage","_x","_getLastMessage","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","messages","wrap","_callee$","_context","prev","next","sent","length","sort","a","b","abrupt","stop","handleAddChat","_handleAddChat","_callee2","contact","res","errorMessage","_callee2$","_context2","fetch","method","headers","token","stringify","status","text","alert","statusText","json","handleChatClick","_x2","_handleChatClick","_callee3","clickedChat","_callee3$","_context3","handlePopupToggle","handleOverlayClick","removeEventListener","_getChats","_callee4","updatedChats","_iterator","_step","updatedChat","_callee4$","_context4","_createForOfIteratorHelper","s","n","done","value","_objectSpread","push","err","e","f","t0","error","children","onClick","map","className","ref","type","onChange","target"],"sources":["C:/Users/User/Documents/web developing/exercises/3/final server/Chat-Application/chat/src/ChatScreen/ContactsBar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport Contact from \"./Contact.js\";\r\n\r\nfunction ContactsBar({ user, onChatSelect, onAddChat, fetchedChats, setFetchedChats, getMessages }) {\r\n  const [isPopupVisible, setPopupVisible] = useState(false);\r\n  const [newContactName, setNewContactName] = useState(\"\");\r\n  const overlayRef = useRef(null);\r\n  const socket = useRef(null);\r\n  const addChatTriggered = useRef(false);\r\n\r\n\r\n  useEffect(() => {\r\n    socket.current = new WebSocket(\"ws://localhost:5000\");\r\n\r\n    socket.current.addEventListener(\"open\", () => {\r\n      console.log(\"WebSocket connection established\");\r\n    });\r\n\r\n    socket.current.addEventListener(\"message\", (event) => {\r\n      const data = JSON.parse(event.data);\r\n      const chat = data.data.chat;\r\n      if (data.event === \"chatAdded\" && !addChatTriggered.current &&\r\n       chat.users.find((u) => u.username === user.username)) {\r\n        const existingChat = fetchedChats.find((c) => c.id === chat.id);\r\n        if (existingChat) {\r\n          return;\r\n        }\r\n        const otherUser = chat.users.find((u) => u.username !== user.username);\r\n        const newChat = {\r\n          id: chat.id,\r\n          user: {\r\n            username: otherUser.username,\r\n            displayName: otherUser.displayName,\r\n            profilePic: otherUser.profilePic\r\n          },\r\n          lastMessage: null\r\n        };\r\n\r\n        setFetchedChats((prevChats) => [...prevChats, newChat]);\r\n        onAddChat(newChat);\r\n      }else if( data.event === \"chatModified\" || data.event === \"chatRemoved\"){\r\n        getChats();\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.current.close();\r\n    };\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    getChats();\r\n  }, []);\r\n\r\n  async function getLastMessage(chat) {\r\n    const messages = await getMessages(chat);\r\n    if (messages && messages.length > 0) {\r\n      messages.sort((a, b) => b.id - a.id);\r\n      return messages[0];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  async function handleAddChat() {\r\n  addChatTriggered.current = true;\r\n  const contact = { username: newContactName };\r\n    const res = await fetch('http://localhost:5000/api/Chats', {\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${user.token}`\r\n      },\r\n      'body': JSON.stringify(contact)\r\n    });\r\n    if (res.status != 200){\r\n      const errorMessage = await res.text();\r\n      alert(res.status + \" \" + res.statusText + \"\\n\" + errorMessage);\r\n    } else {\r\n      const data = await res.json();\r\n      const lastMessage = await getLastMessage(data);\r\n      const newChat = {\r\n        id: data.id,\r\n        user:\r\n        {\r\n          \"username\": data.user.username,\r\n          \"displayName\": data.user.displayName,\r\n          \"profilePic\": data.user.profilePic\r\n        },\r\n        lastMessage: lastMessage\r\n      }\r\n      setPopupVisible(false);\r\n      setFetchedChats((prevChats) => [...prevChats, newChat]);\r\n      onAddChat(newChat);\r\n    };\r\n    addChatTriggered.current = false;\r\n  }\r\n\r\n  async function handleChatClick(clickedChat) {\r\n    const id = clickedChat.id;\r\n    const res = await fetch(`http://localhost:5000/api/Chats/${id}`, {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${user.token}`\r\n      },\r\n    });\r\n    if (res.status != 200){\r\n      const errorMessage = await res.text();\r\n      alert(res.status + \" \" + res.statusText + \"\\n\" + errorMessage);\r\n    } else {\r\n      const data = await res.json();\r\n      onChatSelect(data);\r\n    }\r\n  }\r\n\r\n  const handlePopupToggle = () => {\r\n    setPopupVisible(!isPopupVisible);\r\n  };\r\n\r\n  const handleOverlayClick = () => {\r\n    if (isPopupVisible) {\r\n      return;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isPopupVisible) {\r\n      overlayRef.current.addEventListener(\"click\", handleOverlayClick);\r\n    }\r\n    return () => {\r\n      if (overlayRef.current) {\r\n        overlayRef.current.removeEventListener(\"click\", handleOverlayClick);\r\n      }\r\n    };\r\n  }, [isPopupVisible]);\r\n\r\n  async function getChats() {\r\n    try {\r\n        const res = await fetch('http://localhost:5000/api/Chats', {\r\n        method: 'get',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${user.token}`\r\n        },\r\n      });\r\n      if (res.status != 200){\r\n        const errorMessage = await res.text();\r\n        alert(res.status + \" \" + res.statusText + \"\\n\" + errorMessage);\r\n      } else {\r\n        const data = await res.json();\r\n        const updatedChats = [];\r\n        for (const chat of data) {\r\n          const lastMessage = chat.lastMessage;\r\n\r\n          const updatedChat = {\r\n            ...chat,\r\n            lastMessage: lastMessage,\r\n          };\r\n          updatedChats.push(updatedChat);\r\n        }\r\n        setFetchedChats(updatedChats);\r\n        return data;\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  }\r\n  \r\n\r\n  \r\n  return (\r\n    <div id=\"chats_bar\">\r\n      <div id=\"chat_bar_line1\">\r\n        <span id=\"chats_title\">Contacts</span>\r\n        <span id=\"more_icon\" onClick={handlePopupToggle}>\r\n          +\r\n        </span>\r\n      </div>\r\n      <div id=\"chats\">\r\n        {fetchedChats &&\r\n         fetchedChats.map((chat) => (\r\n            <Contact\r\n            key={chat.id}\r\n            chat={chat}\r\n            onClick={() => handleChatClick(chat)}\r\n\r\n            />\r\n        ))}\r\n        {/* Render the popup if exists */}\r\n        {isPopupVisible && (\r\n          <div>\r\n            <div className=\"overlay\" ref={overlayRef}></div>\r\n            <div id=\"popup\">\r\n              <div id=\"popup_content\">\r\n                <p>Add a new contact</p>\r\n                <span>Name</span>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newContactName}\r\n                  onChange={(e) => setNewContactName(e.target.value)}\r\n                />\r\n                <button id=\"cancel_button\" onClick={() => setPopupVisible(false)}>\r\n                  Cancel\r\n                </button>\r\n                <button id=\"add_button\" onClick={handleAddChat}>\r\n                  Add\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ContactsBar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}